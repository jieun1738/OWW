<div th:fragment="sidebar(userName, userEmail, totalAssets, safeboxBalance, goalPercent, active)">
  <aside class="leftnav" aria-label="뱅킹 사이드바">

    <!-- 상단 사용자 박스 -->
    <div class="ln-header">
      <div class="icon-box brand --xl" title="User">
        <i class='bx bx-user-circle'></i>
      </div>
      <div class="ln-user">
        <div class="ln-hello" th:text="${userName != null ? userName + '님의 지갑' : '반가워요!'}">
          반가워요!
        </div>
        <div class="ln-mail" th:text="${userEmail != null ? userEmail : ''}">
          user@example.com
        </div>
      </div>
    </div>

    <!-- 프로필/잔액 요약 - KPI 카드 스타일로 변경 -->
    <div class="ln-summary">
      <div class="ln-kpi">
        <div class="kpi">
          <div class="icon-box --sm">
            <i class='bx bx-wallet'></i>
          </div>
          <div class="v" th:text="'₩' + ${#numbers.formatInteger(totalAssets, 3, 'COMMA')}">₩0</div>
          <div class="t">계좌 총액</div>
        </div>
        
        <div class="kpi">
          <div class="icon-box --sm">
            <i class='bx bx-lock'></i>
          </div>
          <div class="v" th:text="'₩' + ${#numbers.formatInteger(safeboxBalance, 3, 'COMMA')}">₩0</div>
          <div class="t">세이프박스</div>
        </div>
        
        <div class="kpi">
          <div class="icon-box --sm">
            <i class='bx bx-target-lock'></i>
          </div>
          <div class="v" th:text="${goalPercent != null ? goalPercent + '%' : '0%'}">0%</div>
          <div class="t">목표 대비</div>
        </div>
      </div>
    </div>

    <!-- 내비게이션 -->
    <div class="ln-title">메뉴</div>
    <nav class="ln-list">
      <a class="ln-item" th:classappend="${#strings.containsIgnoreCase(active,'Main')? ' active' : ''}" th:href="@{/banking/main}">
        <i class='bx bx-home'></i><span>메인</span>
      </a>
      <a class="ln-item" th:classappend="${#strings.containsIgnoreCase(active,'CreateAccount')? ' active' : ''}" th:href="@{/banking/createAccount}">
        <i class='bx bx-plus-circle'></i><span>계좌 생성</span>
      </a>
      <a class="ln-item" th:classappend="${#strings.containsIgnoreCase(active,'Safebox')? ' active' : ''}" th:href="@{/banking/safebox}">
        <i class='bx bx-lock'></i><span>세이프박스</span>
      </a>
    </nav>

    <!-- 도움말 -->
    <div class="ln-help">
      <div class="icon-box --sm"><i class='bx bx-info-circle'></i></div>
      <div class="t">로그인 필요 시 접근 차단 후 로그인 페이지로 유도됩니다.</div>
    </div>

  </aside>
</div>