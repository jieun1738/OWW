<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>상품 비교</title>
    <link rel="stylesheet" th:href="@{/css/design.css}">
  <link rel="stylesheet" th:href="@{/css/Comparison.css}">
</head>
<body>
  <!-- 검색폼 -->
  <form action="/searchloan" method="get" class="search-form">
    <input type="text" name="search" placeholder="대출 상품명 검색" />
    <input type="hidden" name="lastUrl" value="LoanComparison">
    <button type="submit" class="btn primary">검색</button>
  </form>

  <h3>대출 비교</h3>

  <!-- 상품 선택 버튼 목록 -->
  <div class="product-list">
    <form th:each="product : ${products}" th:action="@{/loancomparisonADD}" method="get">
      <input type="hidden" name="loanName" th:value="${product}" />
      <button type="submit" th:text="${product}" class="btn small"></button>
    </form> 
  </div>

  <!-- 비교 결과 영역 -->
  <div class="comparison-container">
    
    <!-- 상품 1 -->
<div class="cards">

  <!-- 상품 1 -->
  <div class="card">
    <h3>
      상품 1: 
      <span th:text="${session.loandetails1 != null} ? ${session.loandetails1.loanName} : '선택된 상품 없음'">
        선택된 상품 없음
      </span>
    </h3>
    <p>상세 설명: <span th:text="${session.loandetails1 != null} ? ${session.loandetails1.LoanExplanation} : '-'">-</span></p>
    <p>대출 한도: <span th:text="${session.loandetails1 != null} ? ${session.loandetails1.LoanLimit} : '-'">-</span></p>
    <p>대출 기간(개월): <span th:text="${session.loandetails1 != null} ? ${session.loandetails1.LoanPeriod} : '-'">-</span></p>
    <p>상환 방식:   
      <span th:switch="${session.loandetails1 != null} ? ${session.loandetails1.LoanRepaymentType} : -1">
        <span th:case="0">원리금 균등상환</span>
        <span th:case="1">원금균등상환</span>
        <span th:case="*">-</span>
      </span>
    </p>
    <p>이자율(%): <span th:text="${session.loandetails1 != null} ? ${session.loandetails1.InterestRate} : '-'">-</span></p>

    <form th:if="${session.loandetails1 != null}" th:action="@{/loandetail}" method="get">
      <input type="hidden" name="loanName" th:value="${session.loandetails1.loanName}" />
      <button type="submit" class="btn">선택</button>
    </form>

    <form th:if="${session.loandetails1 != null}" th:action="@{/loancomparisonDEL1}" method="post">
      <button type="submit" class="btn danger">취소</button>
    </form>
  </div>

  <!-- 상품 2 -->
  <div class="card">
    <h3>
      상품 2: 
      <span th:text="${session.loandetails2 != null} ? ${session.loandetails2.loanName} : '선택된 상품 없음'">
        선택된 상품 없음
      </span>
    </h3>
    <p>상세 설명: <span th:text="${session.loandetails2 != null} ? ${session.loandetails2.LoanExplanation} : '-'">-</span></p>
    <p>대출 한도: <span th:text="${session.loandetails2 != null} ? ${session.loandetails2.LoanLimit} : '-'">-</span></p>
    <p>대출 기간(개월): <span th:text="${session.loandetails2 != null} ? ${session.loandetails2.LoanPeriod} : '-'">-</span></p>
    <p>상환 방식:   
      <span th:switch="${session.loandetails2 != null} ? ${session.loandetails2.LoanRepaymentType} : -1">
        <span th:case="0">원리금 균등상환</span>
        <span th:case="1">원금균등상환</span>
        <span th:case="*">-</span>
      </span>
    </p>
    <p>이자율(%): <span th:text="${session.loandetails2 != null} ? ${session.loandetails2.InterestRate} : '-'">-</span></p>

    <form th:if="${session.loandetails2 != null}" th:action="@{/loandetail}" method="get">
      <input type="hidden" name="loanName" th:value="${session.loandetails2.loanName}" />
      <button type="submit" class="btn">선택</button>
    </form>

    <form th:if="${session.loandetails2 != null}" th:action="@{/loancomparisonDEL2}" method="post">
      <button type="submit" class="btn danger">취소</button>
    </form>
  </div>

</div>
  </div>
</body>
</html>
