<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oww.oww1.mapper.PackageMapper">

  <!-- 패키지 카드/상세용: package_admin_v 뷰 사용 -->
  <select id="selectAllPackages" resultType="com.oww.oww1.VO.PackageAdminViewVO">
    SELECT
      package_no   AS packageNo,
      type,
      NVL(discount,0) AS discount,
      hall_no      AS hallNo,
      hall_name    AS hallName,
      hall_vendor  AS hallVendor,
      hall_address AS hallAddress,
      hall_cost    AS hallCost,
      hall_img     AS hallImg,
      studio_no    AS studioNo,
      studio_name  AS studioName,
      studio_vendor AS studioVendor,
      studio_cost  AS studioCost,
      dress_no     AS dressNo,
      dress_name   AS dressName,
      dress_vendor AS dressVendor,
      dress_cost   AS dressCost,
      makeup_no    AS makeupNo,
      makeup_name  AS makeupName,
      makeup_vendor AS makeupVendor,
      makeup_cost  AS makeupCost,
      total_price  AS totalPrice,
      final_price  AS finalPrice
    FROM package_admin_v
    ORDER BY package_no
  </select>

  <select id="selectByType" parameterType="int" resultType="com.oww.oww1.VO.PackageAdminViewVO">
    SELECT
      package_no   AS packageNo,
      type,
      NVL(discount,0) AS discount,
      hall_no      AS hallNo,
      hall_name    AS hallName,
      hall_vendor  AS hallVendor,
      hall_address AS hallAddress,
      hall_cost    AS hallCost,
      hall_img     AS hallImg,
      studio_no    AS studioNo,
      studio_name  AS studioName,
      studio_vendor AS studioVendor,
      studio_cost  AS studioCost,
      dress_no     AS dressNo,
      dress_name   AS dressName,
      dress_vendor AS dressVendor,
      dress_cost   AS dressCost,
      makeup_no    AS makeupNo,
      makeup_name  AS makeupName,
      makeup_vendor AS makeupVendor,
      makeup_cost  AS makeupCost,
      total_price  AS totalPrice,
      final_price  AS finalPrice
    FROM package_admin_v
    WHERE type = #{type}
    ORDER BY package_no
  </select>

  <!-- 원본 package 테이블에서 구성 조회 -->
  <select id="selectPackageByNo" parameterType="int" resultType="com.oww.oww1.VO.PackageVO">
    SELECT
      package_no AS packageNo,
      type,
      hall,
      studio,
      dress,
      makeup,
      NVL(discount,0) AS discount
    FROM package
    WHERE package_no = #{packageNo}
  </select>

</mapper>
