<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
  <title layout:fragment="title">WeddingConfirm</title>
  <link rel="stylesheet" th:href="@{/css/WeddingConfirm.css}">
</head>
<body>
<section layout:fragment="content">
  <div class="page" id="wpconfirm">
    <div th:replace="~{fragments/MainSideBar :: sidebar(user=${user}, active='WeddingPlanner/WeddingConfirm', progress=${progressPercent})}"></div>

    <main class="content">
      <header class="page-header">
        <h1 class="title section-title"><i class='bx bx-check-shield'></i> 확정 전 미리보기</h1>
        <p class="desc" th:text="${isPackage ? '패키지 구성 확인' : 'DIY 구성 확인'}">구성 확인</p>
      </header>

      <section class="panel">
        <ul class="meta">
          <li><b>홀</b> <span th:text="${card.hallName}">-</span> <small th:text="${card.hallCost > 0 ? #numbers.formatInteger(card.hallCost,3,'COMMA') + '원' : ''}"></small></li>
          <li><b>스튜디오</b> <span th:text="${card.studioName}">-</span> <small th:text="${card.studioCost > 0 ? #numbers.formatInteger(card.studioCost,3,'COMMA') + '원' : ''}"></small></li>
          <li><b>드레스</b> <span th:text="${card.dressName}">-</span> <small th:text="${card.dressCost > 0 ? #numbers.formatInteger(card.dressCost,3,'COMMA') + '원' : ''}"></small></li>
          <li><b>메이크업</b> <span th:text="${card.makeupName}">-</span> <small th:text="${card.makeupCost > 0 ? #numbers.formatInteger(card.makeupCost,3,'COMMA') + '원' : ''}"></small></li>
        </ul>

        <div class="price-row">
          <div class="label"><i class='bx bx-calculator'></i> 총 금액</div>
          <div class="value">
            <del th:if="${isPackage}" th:text="${#numbers.formatInteger(card.totalPrice,3,'COMMA') + '원'}">0원</del>
            <b th:text="${#numbers.formatInteger(card.finalPrice,3,'COMMA') + '원'}">0원</b>
            <span class="badge" th:if="${isPackage}" th:text="${card.discount + '%'}">0%</span>
          </div>
        </div>
      </section>

      <footer class="toolbar">
        <a class="btn" th:href="@{/planner/diy}"><i class='bx bx-wrench'></i> DIY로</a>
        <a class="btn" th:href="@{/planner/category}"><i class='bx bx-book-content'></i> 패키지로</a>

        <!-- 확정 -->
        <form th:action="@{/planner/confirm}" method="post" th:if="${!isPackage}">
          <button class="btn brand" type="submit"><i class='bx bx-badge-check'></i> DIY 확정</button>
        </form>
        <form th:action="@{/planner/package/confirm}" method="post" th:if="${isPackage}">
          <input type="hidden" name="packageNo" th:value="${card.packageNo}">
          <button class="btn brand" type="submit"><i class='bx bx-badge-check'></i> 이 패키지 확정</button>
        </form>
      </footer>
    </main>
  </div>
</section>
</body>
</html>
