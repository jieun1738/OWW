<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/base}">
<head>
<title layout:fragment="title">플랜 비교 | OWW</title>
<link rel="stylesheet" th:href="@{/css/WeddingPlanCompare.css}" />
</head>
<body>
	<section layout:fragment="content">
		<div class="page" id="wpplancompare">
			<!-- 좌측 사이드바 -->
			<div
				th:replace="~{fragments/MainSideBar :: sidebar(
        user=${user},
        active='WeddingPlanner/WeddingPlanCompare',
        progress=${progressPercent}
    )}"></div>

			<!-- 본문 -->
			<main class="content">
				<h1 class="title">플랜 비교</h1>
				<p class="desc">임시 플랜 보관함에서 선택한 최대 4개의 플랜을 나란히 비교합니다.</p>

				<!-- 비교 선택이 없을 때 -->
				<div class="empty" th:if="${plans == null or #lists.isEmpty(plans)}">
					<i class="bx bx-info-circle"></i> 비교할 플랜이 없습니다. 보관함에서 ‘비교담기’를
					선택하세요.
					<div style="margin-top: 10px">
						<a class="btn" th:href="@{/planner/WeddingPlanList}"><i
							class="bx bx-chevron-left"></i> 보관함으로</a>
					</div>
				</div>

				<!-- 비교 테이블 -->
				<div class="cmp-table"
					th:if="${plans != null and !#lists.isEmpty(plans)}">
					<div class="cmp-header">
						<div class="c">항목</div>
						<div class="c" th:each="i,stat : ${plans}">
							<div class="pname">플랜 [[${cmpIdx[stat.index]} + 1]]</div>
						</div>
					</div>

					<div class="cmp-row">
						<div class="c key">구성</div>
						<div class="c" th:each="plan : ${plans}">
							<ul class="items">
								<li th:each="v : ${plan}">
									<div class="thumb">
										<img
											th:if="${v != null and v.img != null and !#strings.isEmpty(v.img)}"
											th:src="@{${v.img}}" alt="">
										<div class="noimg"
											th:if="${v == null or v.img == null or #strings.isEmpty(v.img)}">
											<i class="bx bx-image-alt"></i> 이미지 없음
										</div>
									</div>
									<div>
										<strong class="name"
											th:text="${v != null ? v.productName : '미지정'}">상품명</strong>
										<div class="sub">
											(<span
												th:text="${v != null ? (v.category == 0 ? '웨딩홀' : (v.category==1 ? '스튜디오' : (v.category==2 ? '드레스' : '메이크업'))) : '-'}">카테고리</span>)
											· <span th:text="${v != null ? v.address : '-'}">주소</span>
										</div>
									</div>
									<div class="price"
										th:text="${v != null ? #numbers.formatInteger(v.cost,3,'COMMA') + '원' : '0원'}">0원</div>
								</li>

							</ul>
						</div>
					</div>

					<div class="cmp-row">
						<div class="c key">합계</div>
						<div class="c" th:each="t : ${totals}">
							<strong th:text="${#numbers.formatInteger(t,3,'COMMA') + '원'}">0원</strong>
						</div>
					</div>
				</div>

				<div class="actions"
					th:if="${plans != null and !#lists.isEmpty(plans)}"
					style="margin-top: 14px">
					<a class="btn ghost" th:href="@{/planner/WeddingPlanList}"><i
						class="bx bx-chevron-left"></i> 보관함으로</a>
				</div>
			</main>
		</div>
	</section>
</body>
</html>
