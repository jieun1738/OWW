<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
  <title layout:fragment="title">웨딩플래너 | DIY</title>
</head>
<body>
<section layout:fragment="content">
  <div class="page" id="wp-diy">

    <!-- 좌측 사이드바 -->
    <div th:replace="~{fragments/MainSideBar :: sidebar(user=${user}, active='WeddingPlanner/WeddingDIY', progress=${progressPercent})}"></div>

    <!-- 우측 본문 -->
    <main class="main">
      <h1 class="section-title">사용자 DIY</h1>
      <p class="section-desc">카테고리를 전환하며 원하는 상품을 고르고, 확인 화면에서 최종 확정하세요.</p>

      <!-- 폴더 탭: '전체보기'가 가장 왼쪽(요구사항 반영) -->
      <nav class="folder-tabs" aria-label="카테고리" style="display:flex;gap:8px;margin:10px 0 16px">
        <a th:href="@{/planner/diy(cat=0)}" th:classappend="${cat==0} ? 'active'" class="pill" style="padding:8px 12px;border:1px solid var(--line);border-radius:999px">웨딩홀</a>
        <a th:href="@{/planner/diy(cat=1)}" th:classappend="${cat==1} ? 'active'" class="pill" style="padding:8px 12px;border:1px solid var(--line);border-radius:999px">스튜디오</a>
        <a th:href="@{/planner/diy(cat=2)}" th:classappend="${cat==2} ? 'active'" class="pill" style="padding:8px 12px;border:1px solid var(--line);border-radius:999px">드레스</a>
        <a th:href="@{/planner/diy(cat=3)}" th:classappend="${cat==3} ? 'active'" class="pill" style="padding:8px 12px;border:1px solid var(--line);border-radius:999px">메이크업</a>
      </nav>

      <!-- 상품 카드 목록 -->
      <div class="grid" style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px">
        <article class="card" th:each="pr : ${products}" style="border:1px solid var(--line);border-radius:16px;padding:16px;background:var(--card)">
          <div class="media" style="aspect-ratio:16/9;overflow:hidden;border-radius:12px;margin-bottom:8px">
            <img th:src="${pr.img}" th:alt="${pr.product_name}" style="width:100%;height:100%;object-fit:cover">
          </div>
          <h4 class="title" th:text="${pr.product_name}">상품명</h4>
          <p class="price" th:text="${#numbers.formatInteger(pr.cost,3,'COMMA')}" style="color:var(--ink)">0</p>
          <small class="addr" th:text="${pr.address}" style="color:var(--sub)"></small>
        </article>
      </div>

      <!-- 가장 단순한 DIY 선택 제출 폼 (JS 없이도 테스트 가능) -->
      <section style="margin-top:22px">
        <h2 class="section-subtitle">DIY 선택 결과 보내기</h2>
        <form method="post" th:action="@{/planner/confirm}" style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;max-width:720px">
          <input type="number" name="hall"   placeholder="hall product_no"   required>
          <input type="number" name="studio" placeholder="studio product_no" required>
          <input type="number" name="dress"  placeholder="dress product_no"  required>
          <input type="number" name="makeup" placeholder="makeup product_no" required>
          <div style="grid-column:1/-1">
            <button type="submit" class="btn" style="padding:10px 14px;border-radius:10px;border:1px solid var(--line)">DIY 선택 확인</button>
          </div>
        </form>
        <p class="hint" style="margin-top:8px;color:var(--sub)">* DIY는 할인 없음. 확인 화면에서 선택값을 다시 확인하고 최종 확정합니다.</p>
      </section>
    </main>
  </div>
</section>
</body>
</html>
