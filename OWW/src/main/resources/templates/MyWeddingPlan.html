<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/totdesign}">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>myPage</title>
	<!-- tsparticles JS -->
	<script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
	<link th:href="@{/css/design.css}" rel="stylesheet" />
	<link th:href="@{/css/WeddingDIY.css}" rel="stylesheet" />
	<script src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>
	<script src="/js/payment.js" defer></script>
	
	<style>
		.card-content {
			display: grid;
			grid-template-columns: 120px 1fr;
			gap: 15px;
			align-items: start;
		}

		.card-image {
			width: 100%;
			height: 100px;
			object-fit: cover;
			border-radius: 8px;
		}

		.card-details {
			display: grid;
			grid-template-columns: 1fr auto;
			gap: 15px;
			align-items: start;
		}

		.card-info h3 {
			margin: 0 0 8px 0;
			color: #FF6F61;
			font-size: 18px;
			font-weight: 600;
		}

		.card-price {
			color: #e91e63;
			font-size: 16px;
			font-weight: bold;
			margin: 5px 0;
		}

		.card-address {
			color: #666;
			font-size: 14px;
			margin: 5px 0;
		}

		.card-description {
			color: #777;
			font-size: 13px;
			line-height: 1.4;
			margin: 8px 0;
		}

		.card-controls {
			display: flex;
			flex-direction: column;
			gap: 10px;
			min-width: 150px;
		}

		.control-row {
			display: flex;
			align-items: center;
			gap: 8px;
			font-size: 14px;
		}

		.control-row input[type="checkbox"] {
			width: 16px;
			height: 16px;
		}

		.amount-input {
			width: 80px;
			padding: 4px 8px;
			border: 1px solid #ddd;
			border-radius: 4px;
			font-size: 12px;
		}




		@media (max-width: 768px) {
			.card-content {
				grid-template-columns: 1fr;
				gap: 10px;
			}

			.card-details {
				grid-template-columns: 1fr;
				gap: 10px;
			}

			.card-controls {
				min-width: auto;
			}
		}
	</style>
</head>

<body>
	<th:block layout:fragment="header" th:insert="~{@{/fragments/header}}"></th:block>
	<th:block layout:fragment="nav" th:insert="~{@{/fragments/nav}}"></th:block>

	<!-- ========== Left Global Menu ========== -->
	<aside class="leftnav" aria-label="ê¸€ë¡œë²Œ ë©”ë‰´">
		<div class="content">
			<img src="/img/user.png" alt="ì‚¬ìš©ì í”„ë¡œí•„" width="20px" height="20px" /><br>
			<span th:text="${totalBudget.user_email}">ì‚¬ìš©ì ì´ë©”ì¼</span>
			<div class="progress-container">
				<div class="progress-bar" th:style="'width:' + ${contract_progress}+'%'"></div>
			</div>
		</div>
		<div class="sidebar">
			<h2>ë©”ë‰´</h2>

			<a class="ln-item" href="/wedding-plan" aria-label="ë‚˜ì˜ ì›¨ë”©í”Œëœ ë³´ê¸°">
				<span>my ì›¨ë”©í”Œëœ</span><span class="ln-dot"></span>
			</a><br>
			<a class="ln-item" href="/budget-setting" aria-label="ì˜ˆì‚° ì„¤ì •í•˜ê¸°">
				<span>ì˜ˆì‚°ì„¤ì •</span><span class="ln-dot"></span>
			</a><br>
			<a class="ln-item" href="/consumption-info" aria-label="ì†Œë¹„ì •ë³´ ì¡°íšŒí•˜ê¸°">
				<span>ì†Œë¹„ì •ë³´ ì¡°íšŒ</span><span class="ln-dot"></span>
			</a><br>
			<a class="ln-item" href="/savings" aria-label="ì°¨ê³¡ì°¨ê³¡ ê¸ˆê³  ê´€ë¦¬">
				<span>ì°¨ê³¡ì°¨ê³¡ ê¸ˆê³ </span><span class="ln-dot"></span>
			</a><br>
			<a class="ln-item" href="/payment-history" aria-label="ë¯¸ë‹ˆìŠ¤í† ì–´ ê²°ì œë‚´ì—­ ë³´ê¸°">
				<span>ë¯¸ë‹ˆìŠ¤í† ì–´ ê²°ì œ ë‚´ì—­</span><span class="ln-dot"></span>
			</a>
		</div>
	</aside>

	<!-- ========== Main ========== -->
	<main class="main">


		<!-- ì›¨ë”© ìƒí’ˆ ì¹´ë“œë“¤ -->
		<section class="cards" aria-live="polite">
			<div class="smalltitle">my ì›¨ë”© í”Œëœ</div>
			<div class="progress-card">
				<div class="progress-item">
					<h4>ê²°í˜¼ ì¤€ë¹„ ì§„í–‰ìœ¨</h4>
					<div class="progress-container">
						<div id="progress-bar" class="progress-bar" th:style="'width:' + ${contract_progress}+'%'">
							<span th:text="${contract_progress} + '%'"></span>
						</div>
					</div>
				</div>
				<div class="progress-item">
					<h4>ì˜ˆì‚° ì‚¬ìš©ìœ¨</h4>
					<div class="progress-container">
						<div class="progress-bar" th:style="'width:' + ${paid_progress}+'%'">
							<span th:text="${paid_progress} + '%'"></span>
						</div>
					</div>
				</div>
			</div>
			<div class="total-card">
				<h3 th:if="${discount != 0}">ğŸ’¡ ì €ì¥ëœ ìƒí’ˆì€ íŒ¨í‚¤ì§€ ìƒí’ˆìœ¼ë¡œ <span th:text="|${discount}%|"></span> í• ì¸ ì ìš©ë©ë‹ˆë‹¤.</h3>
				<h5 th:if="${discount != 0}">âš ï¸ ê°œë³„í•­ëª© ìˆ˜ì •ì‹œ í• ì¸ì ìš©ì´ ë¶ˆê°€ëŠ¥ í•©ë‹ˆë‹¤.</h5>
				<form class="total">
					<div class="total">ì´ ì˜ˆìƒ ê²¬ì : <span th:text="${total_cost}"
							style="text-decoration: underline;"></span> ì›
						<input type="hidden" name="cost" th:value="${total_cost}">
						<input type="hidden" name="product_name" th:value="'ì „ì²´ í”Œëœ ê²°ì œ'">
						<input type="hidden" name="category" th:value="4">
						<input type="hidden" name="discount" th:value="${discount}">
						<button type="button" class="payBtn">ì „ì²´ í•­ëª© ê²°ì œí•˜ê¸°</button>

					</div>
				</form>
			</div>

			<!-- ì›¨ë”©í™€ ì¹´ë“œ -->
				<article class="card-dash">

					<div class="card-content">
						
							<img th:src="@{'/img/' + ${hallInfo.img}}" alt="ì›¨ë”©í™€ ì´ë¯¸ì§€" class="card-image" />
							<div class="card-details">
								<div class="card-info">
									<h3 th:text="${hallInfo.product_name}">ì›¨ë”©í™€ëª…</h3>
									<div class="card-price" th:text="${hallInfo.cost}">ê°€ê²©</div>
									<div class="card-address" th:text="${hallInfo.address}">ì£¼ì†Œ</div>
									<div class="card-description" th:text="${hallInfo.description}">ì„¤ëª…</div>
								</div>
								<div class="card-controls">
									<div class="hall">
									<div class="control-row">
										<input type="checkbox" class="check_box" name="contract_hall_ch"
											id="contract_hall_ch" th:field="*{planprog.contract_hall_ch}" onchange="updateContract(this)"/>
										<label for="hall_contract">ê³„ì•½ì™„ë£Œ</label>
									</div>
									<div class="control-row">
										<input type="checkbox" class="check_box" name="pay_hall" id="pay_hall"
											th:field="*{planprog.pay_hall_ch}" />
										<label for="hall_paid">ê²°ì œì™„ë£Œ</label>
										<span th:text="${planprog.pay_hall}" class="underline-width"></span>
										<form class="pay">
											<input type="hidden" name="cost" th:value="${hallInfo.cost}">
											<input type="hidden" name="product_name"
												th:value="${hallInfo.product_name}">
											<input type="hidden" name="category" th:value="${hallInfo.category}">
											<button type="button" class="payBtn">í•­ëª© ê²°ì œí•˜ê¸°</button>
										</form>
									</div>
									<button type="button" class="btn" onclick="location.href='planner/WeddingDIY'">
										ë‹¤ë¥¸ ì—…ì²´ ë³´ëŸ¬ê°€ê¸°
									</button>
									</div>
								</div>
							</div>
						</div>
					
				</article>

				<!-- ìŠ¤íŠœë””ì˜¤ ì¹´ë“œ -->
				<article class="card-dash">
					<div class="card-content">
							<img th:src="@{'/img/' + ${studioInfo.img}}" alt="ìŠ¤íŠœë””ì˜¤ ì´ë¯¸ì§€" class="card-image" />
							<div class="card-details">
								<div class="card-info">
									<h3 th:text="${studioInfo.product_name}">ìŠ¤íŠœë””ì˜¤ëª…</h3>
									<div class="card-price" th:text="${studioInfo.cost}">ê°€ê²©</div>
									<div class="card-address" th:text="${studioInfo.address}">ì£¼ì†Œ</div>
									<div class="card-description" th:text="${studioInfo.description}">ì„¤ëª…</div>
								</div>
								<div class="card-controls">
									<div class="stud">
									<div class="control-row">
										<input type="checkbox" name="contract_stud_ch" id="contract_stud_ch"
											th:field="*{planprog.contract_stud_ch}" />
										<label for="studio_contract">ê³„ì•½ì™„ë£Œ</label>
									</div>
									<div class="control-row">
										<input type="checkbox" class="check_box" name="pay_stud" id="pay_stud"
											th:field="*{planprog.pay_stud_ch}" />
										<label for="studio_paid">ê²°ì œì™„ë£Œ</label>
										<span th:text="${planprog.pay_stud}" class="underline-width"></span>
										<form class="pay">
											<input type="hidden" name="cost" th:value="${studioInfo.cost}">
											<input type="hidden" name="product_name"
												th:value="${studioInfo.product_name}">
											<input type="hidden" name="category" th:value="${studioInfo.category}">
											<button type="button" class="payBtn">í•­ëª© ê²°ì œí•˜ê¸°</button>
										</form>
									</div>
									<button type="button" class="btn" onclick="location.href='planner/WeddingDIY'">
										ë‹¤ë¥¸ ì—…ì²´ ë³´ëŸ¬ê°€ê¸°
									</button>
								</div>
								</div>
							</div>
						</div>
					</div>
				</article>

				<!-- ë“œë ˆìŠ¤ ì¹´ë“œ -->
				<article class="card-dash">
					<div class="card-content">
							<img th:src="@{'/img/' + ${dressInfo.img}}" alt="ë“œë ˆìŠ¤ ì´ë¯¸ì§€" class="card-image" />
							<div class="card-details">
								<div class="card-info">
									<h3 th:text="${dressInfo.product_name}">ë“œë ˆìŠ¤ëª…</h3>
									<div class="card-price" th:text="${dressInfo.cost}">ê°€ê²©</div>
									<div class="card-address" th:text="${dressInfo.address}">ì£¼ì†Œ</div>
									<div class="card-description" th:text="${dressInfo.description}">ì„¤ëª…</div>
								</div>
								<div class="card-controls">
									<div class="dres">
									<div class="control-row">
										<input type="checkbox" class="check_box" name="contract_dres_ch"
											id="contract_dres_ch" th:field="*{planprog.contract_dres_ch}" onchange="updateContract(this)" />
										<label for="dress_contract">ê³„ì•½ì™„ë£Œ</label>
									</div>
									<div class="control-row">
										<input type="checkbox" name="pay_dres" id="pay_dres"
											th:field="*{planprog.pay_dres_ch}" />
										<label for="dress_paid">ê²°ì œì™„ë£Œ</label>
										<span th:text="${planprog.pay_dres}" class="underline-width"></span>
										<form class="pay">
											<input type="hidden" name="cost" th:value="${dressInfo.cost}">
											<input type="hidden" name="product_name"
												th:value="${dressInfo.product_name}">
											<input type="hidden" name="category" th:value="${dressInfo.category}">
											<button type="button" class="payBtn">í•­ëª© ê²°ì œí•˜ê¸°</button>
										</form>
									</div>
									<button type="button" class="btn" onclick="location.href='planner/WeddingDIY'">
										ë‹¤ë¥¸ ì—…ì²´ ë³´ëŸ¬ê°€ê¸°
									</button>
								</div>
								</div>
							</div>
						</div>
					
				</article>

				<!-- ë©”ì´í¬ì—… ì¹´ë“œ -->
				<article class="card-dash">
					<div class="card-content">
						
							<img th:src="@{'/img/' + ${makeupInfo.img}}" alt="ë©”ì´í¬ì—… ì´ë¯¸ì§€" class="card-image" />
							<div class="card-details">
								<div class="card-info">
									<h3 th:text="${makeupInfo.product_name}">ë©”ì´í¬ì—…ìƒµëª…</h3>
									<div class="card-price" th:text="${makeupInfo.cost}">ê°€ê²©</div>
									<div class="card-address" th:text="${makeupInfo.address}">ì£¼ì†Œ</div>
									<div class="card-description" th:text="${makeupInfo.description}">ì„¤ëª…</div>
								</div>
								<div class="card-controls">
									<div class="make">
									<div class="control-row">
										<input type="checkbox" name="contract_make_ch" id="contract_make_ch"
											th:field="*{planprog.contract_make_ch}" />
										<label for="makeup_contract">ê³„ì•½ì™„ë£Œ</label>
									</div>
									<div class="control-row">
										<input type="checkbox" class="check_box" name="pay_make" id="pay_make"
											th:field="*{planprog.pay_make_ch}" />
										<label for="makeup_paid">ê²°ì œì™„ë£Œ</label>
										<span th:text="${planprog.pay_make}" class="underline-width"></span>
										<form class="pay">
											<input type="hidden" name="cost" th:value="${makeupInfo.cost}">
											<input type="hidden" name="product_name"
												th:value="${makeupInfo.product_name}">
											<input type="hidden" name="category" th:value="${makeupInfo.category}">
											<button type="button" class="payBtn">í•­ëª© ê²°ì œí•˜ê¸°</button>
										</form>
									</div>
									<button type="button" class="btn" onclick="location.href='planner/WeddingDIY'">
										ë‹¤ë¥¸ ì—…ì²´ ë³´ëŸ¬ê°€ê¸°
									</button>
								</div>
								</div>
							</div>
						</div>
					
				</article>
		</section>
	</main>

	<th:block layout:fragment="footer" th:insert="~{@{/fragments/footer}}"></th:block>
	
</body>
<script src="/js/checkbox_progressbar_db.js"></script>
<script src="/js/checkbox_control.js"></script>
</html>