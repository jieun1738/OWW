<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/base}">

<head>
	<meta charset="UTF-8">
	<title layout:fragment="title">myPage | ì†Œë¹„ì •ë³´ ì¡°íšŒ</title>
	<link rel="stylesheet" th:href="@{/css/Mypage.css}">
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script th:inline="javascript">
		document.addEventListener('DOMContentLoaded', function () {
			const ctx = document.getElementById('chart').getContext('2d');

			const hall = /*[[${planprogress.pay_hall}]]*/ 0;
			const studio = /*[[${planprogress.pay_stud}]]*/ 0;
			const dress = /*[[${planprogress.pay_dres}]]*/ 0;
			const makeup = /*[[${planprogress.pay_make}]]*/ 0;

			new Chart(ctx, {
				type: 'pie',
				data: {
					labels: ['ì›¨ë”©í™€', 'ìŠ¤íŠœë””ì˜¤', 'ë“œë ˆìŠ¤', 'ë©”ì´í¬ì—…'],
					datasets: [{
						data: [hall, studio, dress, makeup],
						backgroundColor: [
							'rgba(0, 102, 255, 0.5)',
							'rgba(0, 204, 102, 0.5)',
							'rgba(255, 153, 0, 0.5)',
							'rgba(255, 51, 102, 0.5)'
						],
						borderColor: [
							'rgba(0, 102, 255, 1)',
							'rgba(0, 204, 102, 1)',
							'rgba(255, 153, 0, 1)',
							'rgba(255, 51, 102, 1)'
						],
						borderWidth: 1
					}]
				},
				options: {
					responsive: false,  // ë°˜ì‘í˜• í•´ì œ
					plugins: {
						title: {
							display: true,
							text: 'í•­ëª©ë³„ ì§€ì¶œ í˜„í™©'
						},
						legend: {
							display: true,
							position: 'top'
						}
					}
				}
			});
		});
	</script>


</head>


<body>
	<section layout:fragment="content">
		<div class="page">

			<!-- ì¢Œì¸¡ ì‚¬ì´ë“œë°” -->
			<div
				th:replace="~{fragments/MypageSideBar :: sidebar(user=${user}, active='ConsumptionInfo', progress=${contract_progress}, totalBudget=${totalBudget}, sumBudget=${sumBudget})}">
			</div>

			<div class="cards">
				<!-- ìš°ì¸¡ ë³¸ë¬¸ -->
				<main class="content">
					<header class="page-header">
						<div>
							<h1 class="title">ì†Œë¹„ì •ë³´ ì¡°íšŒ</h1>
							<p class="desc">ì†Œë¹„ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ê´€ë¦¬í•´ë³´ì„¸ìš”ğŸ’¸</p>
						</div>
					</header>

					<!-- ì˜ˆì‚° ì¹´ë“œ -->
					<div class="consum-card">
						<div class="total">
							<h3>ì „ì²´ ì •ë³´ ìš”ì•½ ë¶„ì„</h3>
							<div class="total-progress">
								<div class="progress-container">
									<div class="progress-bar" th:style="'width:' + ${totalProgress}+'%'"></div>
									<span th:text="${totalProgress} + '%'" th:style="'left: calc(' + ${totalProgress} + '% + 7px)'"></span>
								</div>
								<span><strong>ì´ ì˜ˆì‚°: </strong></span><span th:text="${Amount}">-</span> ì›<br>
								<span><strong>ì‚¬ìš©ê¸ˆì•¡: </strong></span><span th:text="${paidAmount}">-</span> ì›<br>
								<span><strong>ì”ì—¬ê¸ˆì•¡: </strong></span><span th:text="${Amount - paidAmount}">-</span>
								ì›<br>
							</div>
						</div>
						<div class="item-consum">
							<h3>í•­ëª©ë³„ ì§€ì¶œ ì •ë³´</h3>
							<div class="wrap">
								<h3>ì›¨ë”©í™€</h3>
								<div class="progress-container">
									<div class="progress-bar" th:style="'width:' + ${hallProgress}+'%'"></div>
									<span th:text="${hallProgress} + '%'"
										th:style="'left: calc(' + ${hallProgress} + '% + 5px)'"></span>
								</div>

							</div>

							<div class="wrap">
								<h3>ìŠ¤íŠœë””ì˜¤</h3>
								<div class="progress-container">
									<div class="progress-bar" th:style="'width:' + ${studioProgress}+'%'"></div>
									<span th:text="${studioProgress} + '%'"
										th:style="'left: calc(' + ${studioProgress} + '% + 5px)'"></span>
								</div>
							</div>
							<div class="wrap">
								<h3>ë“œë ˆìŠ¤</h3>
								<div class="progress-container">
									<div class="progress-bar" th:style="'width:' + ${dressProgress}+'%'"></div>
									<span th:text="${dressProgress} + '%'"
										th:style="'left: calc(' + ${dressProgress} + '% + 5px)'"></span>
								</div>
							</div>
							<div class="wrap">
								<h3>ë©”ì´í¬ì—…</h3>
								<div class="progress-container">
									<div class="progress-bar" th:style="'width:' + ${makeupProgress}+'%'"></div>
									<span th:text="${makeupProgress} + '%'"
										th:style="'left: calc(' + ${makeupProgress} + '% + 5px)'"></span>
								</div>
							</div>
						</div>
						<div class="pattern">
							<h3>ì†Œë¹„ íŒ¨í„´ ë¶„ì„</h3>
							<!-- ì°¨íŠ¸ ì½˜í…ì¸  -->
							<div class="chart-container">
								<canvas id="chart" width="250" height="250"></canvas>
							</div>
						</div>
					</div>
				</main>
			</div>
		</div>
	</section>
</body>

</html>