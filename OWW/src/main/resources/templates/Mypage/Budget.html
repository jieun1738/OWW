<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title layout:fragment="title">myPage | 예산설정</title>
	<link rel="stylesheet" th:href="@{/css/Mypage.css}">
	
	<script defer src="/js/budgetsetting.js"></script>
</head>

<body>
	<section layout:fragment="content">
	  <div class="page">

	    <!-- 좌측 사이드바 -->
		<div th:replace="~{fragments/MypageSideBar :: sidebar(user=${user}, active='Budget', progress=${contract_progress}, totalBudget=${totalBudget}, sumBudget=${sumBudget})}"></div>

		<div class="cards">
	    <!-- 우측 본문 -->
	    <main class="content">
			<header class="page-header">
			<div>
				<h1 class="title">예산 설정</h1>
				<p class="desc">예산을 설정해서 관리해보세요💸</p>
			</div>
		</header>

			<!-- 예산 카드 -->
			<div class="budget-card">
			
						<form th:action="@{/saveBudget}" method="post">
						        <table class="budget-table">
						            <thead>
						                <tr>
						                    <th>항목</th>
						                    <th>예산 금액 (원)</th>
						                </tr>
						            </thead>
						            <tbody>
						                <tr>
						                    <td class="item">웨딩홀</td>
						                    <td><input type="number" name="hall" th:value="${totalBudget.hall}"/> 원</td>
						                </tr>
						                <tr>
						                    <td class="item">스튜디오</td>
						                    <td><input type="number" name="studio" th:value="${totalBudget.studio}"/> 원</td>
						                </tr>
						                <tr>
						                    <td class="item">드레스</td>
						                    <td><input type="number" name="dress" th:value="${totalBudget.dress}"/> 원</td>
						                </tr>
						                <tr>
						                    <td class="item">메이크업</td>
						                    <td><input type="number" name="makeup" th:value="${totalBudget.makeup}"/> 원</td>
						                </tr>
										<!-- 추가항목 값이 0이 아니면 출력 -->
										<tr th:if="${totalBudget.dvd != 0}">
										    <td class="item">본식 DVD/스냅</td>
										   	<td><input type="number" name="dvd" th:value="${totalBudget.dvd}"/> 원</td>
										</tr>

										<tr th:if="${totalBudget.makeup_parents != 0}">
										    <td class="item">혼주 메이크업</td>
										    <td><input type="number" name="makeup_parents" th:value="${totalBudget.makeup_parents}"/> 원</td>
										</tr>
										<tr th:if="${totalBudget.ring != 0}">
										    <td class="item">웨딩링</td>
										    <td><input type="number" name="ring" th:value="${totalBudget.ring}"/> 원</td>
										</tr>
										<tr th:if="${totalBudget.hair != 0}">
										    <td class="item">헤어변형</td>
										    <td><input type="number" name="hair" th:value="${totalBudget.hair}"/> 원</td>
										</tr>
										<tr th:if="${totalBudget.skincare != 0}">
											<td class="item">스킨케어</td>
											<td><input type="number" name="skincare" th:value="${totalBudget.skincare}"/> 원</td>
										</tr>
										<tr th:if="${totalBudget.hanbok != 0}">
											<td class="item">한복</td>
											<td><input type="number" name="hanbok" th:value="${totalBudget.hanbok}"/> 원</td>
										</tr>
										<tr th:if="${totalBudget.honeymoon != 0}">
											<td class="item">신혼여행</td>
											<td><input type="number" name="honeymoon" th:value="${totalBudget.honeymoon}"/> 원</td>
										</tr>
										<tr th:if="${totalBudget.invitation != 0}">
											<td class="item">청첩장</td>
											<td><input type="number" name="invitation" th:value="${totalBudget.invitation}"/> 원</td>
										</tr>
																			
										<tr class="extraRow">
										    <td class="item">
												<select class="extraOption" name="extraOption[]">
												    <option value="">-- 추가항목 --</option>
												    <option value="dvd" th:disabled="${totalBudget.dvd != 0}">본식 DVD/스냅</option>
												    <option value="makeup_parents" th:disabled="${totalBudget.makeup_parents != 0}">혼주 메이크업</option>
												    <option value="ring" th:disabled="${totalBudget.ring != 0}">웨딩링</option>
												    <option value="hair" th:disabled="${totalBudget.hair != 0}">헤어변형</option>
												    <option value="skincare" th:disabled="${totalBudget.skincare != 0}">스킨케어</option>
												    <option value="hanbok" th:disabled="${totalBudget.hanbok != 0}">한복</option>
												    <option value="honeymoon" th:disabled="${totalBudget.honeymoon != 0}">신혼여행</option>
												    <option value="invitation" th:disabled="${totalBudget.invitation != 0}">청첩장</option>
												</select>
										    </td>										
											<td>
											    <input type="number" class="extraInput" name="extraValue[]" placeholder="금액 입력" style="display:none;" /> 원
											</td>
										</tr>
						                <tr id="totalRow">
						                    <td class="item"><strong>총 예산</strong></td>
						                    <td class="total"><span th:text="${sumBudget}">0</span> 원</td>
						                </tr>
						            </tbody>
						        </table>

						        <div class="btn-wrap">
									<input type="hidden" name="user_email" value="user2@example.com">
						            <button type="submit" class="btn">저장하기</button>
						        </div>
						    </form>
							<div th:if="${msg}" class="alert">
							    <p th:text="${msg}"></p>
							</div>
						</div>
							
						</div>
				</main>
				</div>
				</div>
				</section>
				
</body>

</html>