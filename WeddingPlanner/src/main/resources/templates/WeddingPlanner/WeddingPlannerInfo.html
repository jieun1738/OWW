<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
  <title layout:fragment="title">WeddingPlannerInfo</title>
  <link rel="stylesheet" th:href="@{/css/WeddingPlannerInfo.css}">
</head>
<body>
<section layout:fragment="content">
  <div class="page" id="wpinfo">
    <div th:replace="~{fragments/MainSideBar :: sidebar(user=${user}, active='WeddingPlanner/WeddingPlannerInfo', progress=${progressPercent})}"></div>

    <main class="content">
      <header class="page-header">
        <div>
          <h1 class="title section-title"><i class='bx bx-home-heart'></i>웨딩플래너 현황</h1>
          <p class="desc">진행 상황을 한눈에 확인하세요.</p>
        </div>
        <div class="quick-actions">
          <a class="btn brand" th:href="@{/planner/diy}">
            <i class='bx bx-wrench'></i> DIY 바로가기
          </a>
          <a class="btn" th:href="@{/planner/category}">
            <i class='bx bx-category'></i> 테마 패키지
          </a>
        </div>
      </header>

      <section class="hero">
        <div>
          <div class="icon-box brand --xl" title="요약"><i class='bx bx-bar-chart-alt-2'></i></div>
          <h2 class="hero-title" style="margin-top:10px">현재 요약</h2>
          <p class="hero-desc">임시 플랜과 확정 플랜 수치를 확인하고, 추천 패키지로 바로 이동할 수 있습니다.</p>
        </div>

        <div class="stats">
          <div class="stat">
            <div class="icon-box brand"><i class='bx bx-edit-alt'></i></div>
            <div class="k" th:text="${sessionDraftCount}">0</div>
            <div class="l">임시 플랜(세션)</div>
          </div>
          <div class="stat">
            <div class="icon-box brand"><i class='bx bx-list-check'></i></div>
            <div class="k" th:text="${committedPlanCount}">0</div>
            <div class="l">확정 플랜(DB)</div>
          </div>
          <div class="stat">
            <div class="icon-box brand"><i class='bx bx-gift'></i></div>
            <div class="k" th:text="${recommendedPackages != null ? recommendedPackages.size() : 0}">0</div>
            <div class="l">추천 패키지</div>
          </div>
        </div>
      </section>

      <section class="grid">
        <div class="card" th:each="pkg : ${recommendedPackages}">
          <span class="badge">
            <i class='bx bx-package'></i>
            <span th:text="'TYPE ' + ${pkg.type}">TYPE</span>
          </span>
          <h3 th:text="'추천 패키지 #' + ${pkg.packageNo}">추천 패키지</h3>
          <p>구성: 홀/스튜디오/드레스/메이크업</p>
          <div class="actions">
            <a class="btn" th:href="@{/planner/confirm(packageNo=${pkg.packageNo})}">
              <i class='bx bx-search-alt-2'></i> 미리보기
            </a>
            <form th:action="@{/planner/package/confirm}" method="post">
              <input type="hidden" name="packageNo" th:value="${pkg.packageNo}">
              <button class="btn brand" type="submit"><i class='bx bx-badge-check'></i> 이 패키지 확정</button>
            </form>
          </div>
        </div>
      </section>
    </main>
  </div>
</section>
</body>
</html>
