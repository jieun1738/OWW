<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<body>
<aside class="sidebar" th:fragment="sidebar(user, active, progress)">

  <!-- 프로필 -->
  <div class="profile">
    <div class="avatar">🙂</div>
    <div class="name" th:text="${user != null ? user.name : '사용자'}">사용자</div>
    <div class="grade">일반회원</div>
  </div>

  <!-- 진행바 -->
  <div class="progress-line">
    <div class="progress-fill" th:style="|width:${progress != null ? progress : 0}%|"></div>
  </div>

  <!-- 예산 카드 (제목은 링크) -->
  <div class="mini-card">
    <div class="mini-title">
      <a class="link-underline"
         th:href="@{/mypage/budget}"
         th:text="${budgetTitle != null ? budgetTitle : '예산 설정 정보'}">예산 설정 정보</a>
    </div>
    <ul class="mini-list">
      <li>
        다음 이체일 :
        <span th:text="${nextTransferDate != null ? nextTransferDate : '-'}">-</span>
      </li>
      <li>
        월 예산 :
        <span th:text="${monthlyBudget != null ? #numbers.formatInteger(monthlyBudget,3,'COMMA') + '원' : '-'}">-</span>
      </li>
      <li>
        이번달 사용 :
        <span th:text="${monthlySpent != null ? #numbers.formatInteger(monthlySpent,3,'COMMA') + '원' : '-'}">-</span>
      </li>
    </ul>
  </div>

  <!-- 메뉴 -->
  <nav class="mymenu">
    <!-- 세이프 박스 -->
    <a class="item"
       th:classappend="${active}=='safe' ? ' active' : ''"
       th:href="@{/mypage/safe}">세이프 박스</a>

    <!-- 미니스토어 결제내역 -->
    <a class="item"
       th:classappend="${active}=='ministore' ? ' active' : ''"
       th:href="@{/mypage/ministore/payments}">미니스토어 결제내역</a>

    <!-- (선택) 추가 메뉴들 — 필요 없으면 지워도 됨 -->
    <a class="item"
       th:classappend="${active}=='orders' ? ' active' : ''"
       th:href="@{/mypage/ministore/orders}">주문내역</a>

    <a class="item"
       th:classappend="${active}=='settings' ? ' active' : ''"
       th:href="@{/mypage/settings}">설정</a>
  </nav>

</aside>
</body>
</html>
